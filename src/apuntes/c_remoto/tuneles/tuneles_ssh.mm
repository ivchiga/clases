<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node COLOR="#000000" CREATED="1320785324352" ID="ID_1835214848" MODIFIED="1320787067019" TEXT="T&#xfa;neles SSH">
<font NAME="SansSerif" SIZE="20"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties"/>
<node COLOR="#0033ff" CREATED="1320785362344" ID="ID_1917038394" MODIFIED="1320785776463" POSITION="right" TEXT="caracter&#xed;sticas">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SansSerif" SIZE="18"/>
<node COLOR="#00b439" CREATED="1320785377931" ID="ID_417851167" MODIFIED="1320785776466" TEXT="protocoloas actuales tienen +30a&#xf1;os">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320785413548" ID="ID_484733761" MODIFIED="1320785776466" TEXT="seguridad no era problema">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320785430677" ID="ID_483271677" MODIFIED="1320785776467" TEXT="descuidan">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320785440344" ID="ID_1768997756" MODIFIED="1320785776467" TEXT="seguridad datos enviados"/>
<node COLOR="#111111" CREATED="1320785458444" ID="ID_687620100" MODIFIED="1320785776467" TEXT="confidencialidad datos enviados"/>
</node>
<node COLOR="#990000" CREATED="1320785493473" ID="ID_1316967378" MODIFIED="1320785776468" TEXT="datos en texto plano">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320785517931" ID="ID_607983597" MODIFIED="1320785776468" TEXT="ejemplos">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320785523606" ID="ID_1274609017" MODIFIED="1320785776468" TEXT="FTP"/>
<node COLOR="#111111" CREATED="1320785527278" ID="ID_1977288799" MODIFIED="1320785776468" TEXT="POP3"/>
<node COLOR="#111111" CREATED="1320785530709" ID="ID_1290375725" MODIFIED="1320785776469" TEXT="SMTP"/>
<node COLOR="#111111" CREATED="1320785533847" ID="ID_1854469372" MODIFIED="1320785776469" TEXT="Telnet"/>
<node COLOR="#111111" CREATED="1320785538908" ID="ID_76873605" MODIFIED="1320785776469" TEXT="..."/>
</node>
</node>
<node COLOR="#00b439" CREATED="1320785562882" ID="ID_802332604" MODIFIED="1320785776471" TEXT="soluciones problemas de seguridad">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320785576138" ID="ID_1415693402" MODIFIED="1320785776471" TEXT="crear o utilizar protocolos seguros">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320785676365" ID="ID_1656352545" MODIFIED="1320785776471" TEXT="algunos">
<node COLOR="#111111" CREATED="1320785628161" ID="ID_1286036105" MODIFIED="1320785776472" TEXT="SFTP"/>
<node COLOR="#111111" CREATED="1320785632984" ID="ID_909283194" MODIFIED="1320785776472" TEXT="https"/>
<node COLOR="#111111" CREATED="1320785648258" ID="ID_641148000" MODIFIED="1320786037491" TEXT="pops"/>
<node COLOR="#111111" CREATED="1320786042399" ID="ID_968336750" MODIFIED="1320786047542" TEXT="smtp/tls"/>
<node COLOR="#111111" CREATED="1320785653814" ID="ID_1336508834" MODIFIED="1320785776472" TEXT="..."/>
</node>
<node COLOR="#111111" CREATED="1320785719859" ID="ID_482458427" MODIFIED="1320785776473" TEXT="no viable en muchas ocasiones">
<node COLOR="#111111" CREATED="1320785747680" ID="ID_1381747692" MODIFIED="1320785776473" TEXT="servidores ya existentes"/>
<node COLOR="#111111" CREATED="1320786092622" ID="ID_1813882959" MODIFIED="1320786100657" TEXT="no soportado por aplicaciones cliente"/>
</node>
</node>
<node COLOR="#990000" CREATED="1320785597366" ID="ID_1663052582" MODIFIED="1320785776473" TEXT="Modificar protocolos inseguros se comporten de forma segura">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320785869235" ID="ID_800390883" MODIFIED="1320786232482" TEXT="mediante t&#xfa;neles">
<node COLOR="#111111" CREATED="1320786019158" ID="ID_1731565860" MODIFIED="1320786220471" TEXT="ssh"/>
<node COLOR="#111111" CREATED="1320786022293" ID="ID_1986332907" MODIFIED="1320786025874" TEXT="VPN"/>
<node COLOR="#111111" CREATED="1320786209667" ID="ID_238279593" MODIFIED="1320786214614" TEXT="stunnel"/>
</node>
</node>
</node>
<node COLOR="#00b439" CREATED="1320786424434" ID="ID_362052821" MODIFIED="1320786439829" TEXT="Acceso a servicios remotos">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320786452963" ID="ID_341428478" MODIFIED="1320786465090" TEXT="A trav&#xe9;s &#xfa;nico puerto">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786469774" ID="ID_1942522931" MODIFIED="1320787006284" TEXT="Servicios red privada">
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1320786281067" ID="ID_330890698" MODIFIED="1320786289615" POSITION="left" TEXT="Procedimiento">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SansSerif" SIZE="18"/>
<node COLOR="#00b439" CREATED="1320786289616" ID="ID_624878466" MODIFIED="1320786345740" TEXT="hacer pasar datos protoclo inseguro">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320786372272" ID="ID_367583174" MODIFIED="1320786378739" TEXT="POP3">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786379561" ID="ID_1066263925" MODIFIED="1320786383691" TEXT="VNC">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786386299" ID="ID_291869081" MODIFIED="1320786389646" TEXT="FTP">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786392158" ID="ID_531944778" MODIFIED="1320786396963" TEXT="SMTP">
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1320786346557" ID="ID_751306093" MODIFIED="1320786361611" TEXT="a trav&#xe9;s de protocolo seguro">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320786362890" ID="ID_642066485" MODIFIED="1320786370135" TEXT="conexi&#xf3;n ssh">
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1320786524539" ID="ID_309667646" MODIFIED="1320786531309" TEXT="ssh">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320786531310" ID="ID_1790307638" MODIFIED="1320786554577" TEXT="Toma datos enviados cliente en un extremo del tunel">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786563408" ID="ID_145097229" MODIFIED="1320786577560" TEXT="reenvia datos por canal seguro al servidor">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786578210" ID="ID_534757496" MODIFIED="1320786588044" TEXT="mismo proceso en sentido contrario">
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320786588823" ID="ID_1189446891" MODIFIED="1320786597427" TEXT="esquema funcionamiento">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320786610624" ID="ID_179401090" MODIFIED="1320786739372">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="imagenes/esquema-tunel-ssh.png" />
  </body>
</html>
</richcontent>
<node COLOR="#111111" CREATED="1320786766704" HGAP="47" ID="ID_1735861850" MODIFIED="1320786887827" TEXT="cliente y servidor se comunican mediante protocolo inseguro" VSHIFT="-3"/>
<node COLOR="#111111" CREATED="1320786793498" HGAP="57" ID="ID_1943486640" MODIFIED="1320786884331" TEXT="Tr&#xe1;fico real viaja" VSHIFT="66">
<node COLOR="#111111" CREATED="1320786810745" ID="ID_435872977" MODIFIED="1320786853992" TEXT="tunel ssh"/>
<node COLOR="#111111" CREATED="1320786854651" ID="ID_698343188" MODIFIED="1320786863028" TEXT="conexi&#xf3;n segura"/>
<node COLOR="#111111" CREATED="1320786819801" ID="ID_1141348124" MODIFIED="1320786830067" TEXT="encriptado"/>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#0033ff" CREATED="1320787075135" ID="ID_997966458" MODIFIED="1320787093236" POSITION="left" TEXT="Creaci&#xf3;n t&#xfa;neles">
<edge STYLE="sharp_bezier" WIDTH="8"/>
<font NAME="SansSerif" SIZE="18"/>
<node COLOR="#00b439" CREATED="1320787165398" ID="ID_1622087460" MODIFIED="1320787171968" TEXT="software">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320787109314" ID="ID_236863734" MODIFIED="1320787175928" TEXT="comandos linux">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320787127723" ID="ID_127514530" MODIFIED="1320787179362" TEXT="Putty Windows">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node COLOR="#990000" CREATED="1320787142736" ID="ID_1781452575" MODIFIED="1320787181978" TEXT="Aplicaciones gr&#xe1;ficas">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
<node COLOR="#00b439" CREATED="1320787189407" ID="ID_1041762462" MODIFIED="1320787197739" TEXT="comandos">
<edge STYLE="bezier" WIDTH="thin"/>
<font NAME="SansSerif" SIZE="16"/>
<node COLOR="#990000" CREATED="1320787221995" ID="ID_1433592360" MODIFIED="1320787681121" TEXT="$ ssh -N -p puertor -L plocal:servidorremoto:premoto usuarior@hostremoto opciones">
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320787319807" ID="ID_162053125" MODIFIED="1320787558655">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>-N&#160;</b>&#160;no iniciar terminal tras la conexi&#243;n
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787335819" ID="ID_1663233348" MODIFIED="1320787576199">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>-p puertor</b>&#160;puerto por el que escucha servidor ssh
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787369942" ID="ID_979668195" MODIFIED="1320787589846">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>maquinaremota</b>&#160;&#160;host remoto al que nos conectamos
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787395630" ID="ID_1438031303" MODIFIED="1320787606911">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>usuarior</b>&#160;usuario del host remoto para el que disponemos de credenciales
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787414654" ID="ID_728327898" MODIFIED="1320787617879">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>-L&#160;</b>&#160;&#160;definici&#243;n de un tunel
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787436721" ID="ID_337638237" MODIFIED="1320787631871">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>plocal</b>&#160;&#160;&#160;puerto local encaminado al puerto del servidorremoto
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320787461760" ID="ID_165458530" MODIFIED="1320787646527">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>servidorremoto </b>direcci&#243;n de la m&#225;quina que ejecuta el servicio
    </p>
  </body>
</html>
</richcontent>
<node COLOR="#111111" CREATED="1320787488281" ID="ID_1672765247" MODIFIED="1320787511232" TEXT="direcci&#xf3;n para localizarla"/>
<node COLOR="#111111" CREATED="1320787512077" ID="ID_938799088" MODIFIED="1320787522443" TEXT="desde la m&#xe1;quina a la que conectamos"/>
</node>
<node COLOR="#111111" CREATED="1320787528887" ID="ID_1354372186" MODIFIED="1320787671879">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>premoto</b>&#160;&#160;puerto del servicio a contactar en maquinaremota
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node COLOR="#990000" CREATED="1320788117197" ID="ID_18174632" MODIFIED="1320788706662" TEXT="Ejemplo 1">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Caso 2</b>
    </p>
    <p>
      
    </p>
    <p>
      Necesitamos acceder a un servicio de la red remota y este servicio no es accesible directamente al no haber ning&#250;n puerto de la IP p&#250;blica redireccionado al mismo. En este caso tenemos un servidor web solamente accesible desde la red local en la IP 192.168.10.21.
    </p>
    <p>
      
    </p>
    <p>
      En este caso, la m&#225;quina remota ejecuta tanto el servidor SSH como el servidor MySQL (puerto por defecto 3306). Seg&#250;n esto, la orden adecuada para la creaci&#243;n el t&#250;nel es:
    </p>
  </body>
</html>
</richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320788141333" ID="ID_887361790" MODIFIED="1320788557501" TEXT="$ ssh -N  -L 8080:192.168.10.21:80 omar@servidor.midominio.com">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="5"><b>Descripci&#243;n</b></font>
    </p>
    <p>
      
    </p>
    <p>
      <b>-N</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;indica que no se debe iniciar una terminal tras la conexi&#243;n
    </p>
    <p>
      
    </p>
    <p>
      <b>-L</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;suministra los par&#225;metros para el t&#250;nel
    </p>
    <p>
      
    </p>
    <p>
      <b>8080</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;es el puerto en la m&#225;quina local encaminado al servidor web
    </p>
    <p>
      
    </p>
    <p>
      <b>192.168.10.21</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;es la direcci&#243;n de la m&#225;quina a contactar desde el punto de vista del servidor ssh y como el servidor web est&#225; ejecut&#225;ndose en otra m&#225;quina de la red ponemos su direcci&#243;n
    </p>
    <p>
      
    </p>
    <p>
      <b>80</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;es el puerto que atiende el servidor web
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      A partir de este momento, se puede acceder al servidor web apuntando al puerto 8080 de la m&#225;quina local (localhost o 127.0.0.1).
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320788149902" ID="ID_1036150352" MODIFIED="1320788158864" TEXT="Acceso al servicio web remoto">
<node COLOR="#111111" CREATED="1320788160214" ID="ID_421914303" MODIFIED="1320788212370" TEXT="introducimos en navegador URL http://localhost:8080"/>
</node>
</node>
<node COLOR="#990000" CREATED="1320787728608" ID="ID_345511813" MODIFIED="1320788594746" TEXT="Ejemplo 2" VSHIFT="21">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Caso 2</b>
    </p>
    <p>
      
    </p>
    <p>
      Necesitamos acceder a un servicio de la m&#225;quina remota y este servicio no est&#225; configurado para prestarse sobre una conexi&#243;n cifrada o simplemente est&#225; configurado para atender peticiones locales solamente. Un ejemplo de esto es el servidor de bases de datos MySQL que normalmente atiende conexiones que se gestionan desde la propia computadora, rechazando a las procedentes de red.
    </p>
    <p>
      
    </p>
    <p>
      En este caso, la m&#225;quina remota ejecuta tanto el servidor SSH como el servidor MySQL (puerto por defecto 3306).
    </p>
  </body>
</html>
</richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#111111" CREATED="1320787847682" ID="ID_1436920949" MODIFIED="1320788345075" TEXT="$ ssh -N -p 22 -L 13306:localhost:3306 omar@servidor.midominio.com">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="5"><b>Descripci&#243;n</b></font>
    </p>
    <p>
      
    </p>
    <p>
      <b>-p 2222</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;es el puerto al que escucha el demonio ssh de servidor.midominio.com (si no se especifica escucha por el puerto por defecto, 22)
    </p>
    <p>
      
    </p>
    <p>
      <b>-N</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;indica que no se debe iniciar una terminal tras la conexi&#243;n
    </p>
    <p>
      
    </p>
    <p>
      <b>-L</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;suministra los par&#225;metros para el t&#250;nel
    </p>
    <p>
      
    </p>
    <p>
      <b>13306</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;es el puerto en la m&#225;quina local encaminado al servidor MySQL
    </p>
    <p>
      
    </p>
    <p>
      <b>localhost</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;es la direcci&#243;n de la m&#225;quina a contactar desde el punto de vista del servidor ssh y como el servidor MySQL est&#225; ejecut&#225;ndose en el propio servidor.dominio.com, se usa localhost para autoreferirse
    </p>
    <p>
      
    </p>
    <p>
      <b>3306</b>
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;es el puerto que atiende el servidor MySQL
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      A partir de este momento, se puede usar el programa de administraci&#243;n de bases de datos apuntando al puerto 13306 de la m&#225;quina local (localhost o 127.0.0.1) para acceder al servidor remoto.
    </p>
    <p>
      
    </p>
  </body>
</html>
</richcontent>
</node>
<node COLOR="#111111" CREATED="1320788019486" ID="ID_356573653" MODIFIED="1320788045510" TEXT="Acceso al servicio">
<node COLOR="#111111" CREATED="1320788046783" ID="ID_294378432" MODIFIED="1320788087789" TEXT="$ mysql -h localhost -p 13306 "/>
</node>
</node>
</node>
</node>
</node>
</map>
